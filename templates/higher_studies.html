{% extends "base.html" %}

{% block content %}
<div class="page-header animate-fade-in">
    <h1 class="page-title">Higher Studies Recommendations</h1>
    <p style="color: var(--text-muted);">Discover top universities tailored to your career aspirations.</p>
</div>

<div class="content-grid">
    <!-- Role Selection / current status -->
    <div class="glass-card animate-fade-in">
        <h2 style="margin-bottom: 1rem;"><i class="fa-solid fa-user-graduate"></i> Your Career Path</h2>
        {% if target_role %}
        <p style="font-size: 1.1rem; color: #fff;">
            Target Role: <span style="color: var(--primary); font-weight: bold;">{{ target_role }}</span>
        </p>
        <p style="color: var(--text-muted); font-size: 0.9rem;">
            Based on your resume and skills, we have curated a list of universities that excel in this domain.
        </p>
        {% else %}
        <div
            style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.2);">
            <p style="color: #fca5a5; margin: 0;">
                <i class="fa-solid fa-circle-exclamation"></i> No target role found. Please upload your resume to
                identify your strengths.
            </p>
            <a href="{{ url_for('create_resume') }}" class="btn btn-primary"
                style="margin-top: 1rem; display: inline-block;">Upload Resume</a>
        </div>
        {% endif %}
    </div>

    {% if universities %}
    <!-- Recommendations Grid -->
    <div style="grid-column: 1 / -1;">
        <h3 style="margin-bottom: 1.5rem; color: #fff;">Top Recommended Universities</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
            {% for uni in universities %}
            <div class="glass-card animate-fade-in" style="display: flex; flex-direction: column; height: 100%;">
                <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: var(--secondary); margin: 0; font-size: 1.3rem;">{{ uni.name }}</h3>
                    <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 0.2rem;"><i
                            class="fa-solid fa-location-dot"></i> {{ uni.location }}</p>
                </div>

                <div style="flex: 1;">
                    <p style="color: #e2e8f0; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem;">
                        {{ uni.reason }}
                    </p>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                        <div style="background: rgba(255,255,255,0.03); padding: 0.8rem; border-radius: 8px;">
                            <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.3rem;">Tuition Fee
                                (Yearly)</div>
                            <div style="color: #fff; font-weight: 500;">{{ uni.fee }}</div>
                        </div>
                        <div style="background: rgba(255,255,255,0.03); padding: 0.8rem; border-radius: 8px;">
                            <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.3rem;">Cost of
                                Living</div>
                            <div style="color: #fff; font-weight: 500;">{{ uni.living_cost }}</div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: auto; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.05);">
                    <a href="https://www.google.com/search?q={{ uni.name }}+admission" target="_blank"
                        class="btn btn-outline" style="width: 100%; text-align: center; display: block;">
                        Learn More <i class="fa-solid fa-arrow-up-right-from-square" style="font-size: 0.8rem;"></i>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Info Section -->
    <div class="glass-card animate-fade-in" style="grid-column: 1 / -1; margin-top: 1rem;">
        <h3><i class="fa-solid fa-lightbulb" style="color: var(--accent);"></i> Why these choices?</h3>
        <p style="color: var(--text-muted); line-height: 1.6;">
            Our AI analyzes your technical strengths ("{{ target_role }}") and matches them with universities known for
            strong research and industry connections in that specific field.
            The costs provided are estimates and can vary based on scholarships and lifestyle.
        </p>
    </div>
</div>
{% endblock %}